"use strict";(self["webpackChunkhmtt83"]=self["webpackChunkhmtt83"]||[]).push([[868],{9868:function(t,e,i){i.r(e),i.d(e,{default:function(){return x}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-nav-bar",{attrs:{fixed:"",placeholder:"","safe-area-inset-top":"","left-arrow":"",title:"文章详情"},on:{"click-left":function(e){return t.$router.back()}}}),i("div",{staticClass:"detail-wrap"},[i("h3",[t._v(t._s(t.info.title))]),i("div",{staticClass:"aut-box"},[i("van-image",{attrs:{round:"",fit:"cover",src:t.info.aut_photo}}),i("div",{staticClass:"info"},[i("div",[t._v(t._s(t.info.aut_name))]),i("span",{staticStyle:{color:"gray"}},[t._v(t._s(t._f("relvTime")(t.info.pubdate)))])]),i("van-button",{attrs:{icon:"plus",round:"",type:"info"}},[t._v("关注")])],1),i("div",{staticClass:"content",domProps:{innerHTML:t._s(t.info.content)}},[t._v("文章内容")]),i("article-comment")],1)],1)},n=[],s=i(7214),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},t._l(t.list,(function(e){return i("van-cell",{key:e.com_id},[[i("div",{staticClass:"cell-box"},[i("van-image",{attrs:{round:"",fit:"cover",src:e.aut_photo}}),i("div",{staticClass:"info-box"},[i("div",{staticStyle:{color:"#466bb5"}},[t._v(t._s(e.aut_name))]),i("div",{staticClass:"content"},[t._v(t._s(e.content))]),i("div",[i("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(e.pubdate)))]),i("van-button",{attrs:{size:"mini",plain:""},on:{click:function(i){return t.showReply(e)}}},[t._v("回复("+t._s(e.reply_count)+")")])],1)]),i("van-icon",{attrs:{name:"like-o"}})],1)]],2)})),1),i("div",{staticStyle:{position:"fixed",left:"0",bottom:"0",width:"100%"}},[i("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入评论内容"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},scopedSlots:t._u([{key:"button",fn:function(){return[i("van-button",{attrs:{size:"small",type:"info"},on:{click:t.send}},[t._v("发布")])]},proxy:!0}]),model:{value:t.cmt,callback:function(e){t.cmt=e},expression:"cmt"}})],1),i("van-action-sheet",{attrs:{title:"发表回复"},model:{value:t.replyShow,callback:function(e){t.replyShow=e},expression:"replyShow"}},[t.replyShow?i("reply",{attrs:{currentCmt:t.currentItem}}):t._e()],1)],1)},l=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-cell",[[i("div",{staticClass:"cell-box"},[i("van-image",{attrs:{round:"",fit:"cover",src:t.currentCmt.aut_photo}}),i("div",{staticClass:"info-box"},[i("div",{staticStyle:{color:"#466bb5"}},[t._v(t._s(t.currentCmt.aut_name))]),i("div",{staticClass:"content"},[t._v(t._s(t.currentCmt.content))]),i("div",[i("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(t.currentCmt.pubdate)))])])])],1)]],2),i("van-divider",[t._v("回复列表")]),i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},t._l(t.list,(function(e){return i("van-cell",{key:e.com_id},[[i("div",{staticClass:"cell-box"},[i("van-image",{attrs:{round:"",fit:"cover",src:e.aut_photo}}),i("div",{staticClass:"info-box"},[i("div",{staticStyle:{color:"#466bb5"}},[t._v(t._s(e.aut_name))]),i("div",{staticClass:"content"},[t._v(t._s(e.content))]),i("div",[i("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(e.pubdate)))])])])],1)]],2)})),1),i("div",{staticStyle:{position:"fixed",left:"0",bottom:"0",width:"100%"}},[i("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入评论内容"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},scopedSlots:t._u([{key:"button",fn:function(){return[i("van-button",{attrs:{size:"small",type:"info"},on:{click:t.send}},[t._v("发布")])]},proxy:!0}]),model:{value:t.cmt,callback:function(e){t.cmt=e},expression:"cmt"}})],1)],1)},c=[],d={props:{currentCmt:{type:Object,required:!0}},data(){return{isLoading:!1,finished:!1,list:[],cmt:"",offset:null}},methods:{async onLoad(){let t=await(0,s.TW)({type:"c",source:this.currentCmt.com_id,offset:this.offset});this.list.push(...t.data.data.results),this.offset=t.data.data.last_id,this.isLoading=!1,t.data.data.end_id===t.data.data.last_id&&(this.finished=!0)},async send(){if(""==this.cmt.trim())return this.$toast("请输入点内容");let t=await(0,s.BV)({target:this.currentCmt.com_id,content:this.cmt,art_id:this.$route.query.id});this.list.unshift(t.data.data.new_obj),this.cmt="",this.currentCmt.reply_count++}}},u=d,f=i(1001),v=(0,f.Z)(u,r,c,!1,null,"dd0a56d2",null),h=v.exports,m={components:{reply:h},data(){return{isLoading:!1,finished:!1,list:[],cmt:"",offset:null,replyShow:!1,currentItem:{}}},methods:{showReply(t){this.currentItem=t,this.replyShow=!0},async onLoad(){let t=await(0,s.TW)({type:"a",source:this.$route.query.id,offset:this.offset});this.list.push(...t.data.data.results),this.offset=t.data.data.last_id,this.isLoading=!1,t.data.data.end_id===t.data.data.last_id&&(this.finished=!0)},async send(){if(""==this.cmt.trim())return this.$toast("请输入点内容");let t=await(0,s.BV)({target:this.$route.query.id,content:this.cmt});this.list.unshift(t.data.data.new_obj),this.cmt=""}}},_=m,p=(0,f.Z)(_,o,l,!1,null,"7c1e7903",null),y=p.exports,b={components:{ArticleComment:y},data(){return{info:{}}},async created(){let t=await(0,s.qK)(this.$route.query.id);this.info=t.data.data},destroyed(){console.log("article被销毁")}},C=b,k=(0,f.Z)(C,a,n,!1,null,"0adb35fc",null),x=k.exports}}]);