(self["webpackChunkhmtt83"]=self["webpackChunkhmtt83"]||[]).push([[868],{9868:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return g}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{fixed:"",placeholder:"","safe-area-inset-top":"","left-arrow":"",title:"文章详情"},on:{"click-left":function(e){return t.$router.back()}}}),n("div",{staticClass:"detail-wrap"},[n("h3",[t._v(t._s(t.info.title))]),n("div",{staticClass:"aut-box"},[n("van-image",{attrs:{round:"",fit:"cover",src:t.info.aut_photo}}),n("div",{staticClass:"info"},[n("div",[t._v(t._s(t.info.aut_name))]),n("span",{staticStyle:{color:"gray"}},[t._v(t._s(t._f("relvTime")(t.info.pubdate)))])]),n("van-button",{attrs:{icon:"plus",round:"",type:"info"}},[t._v("关注")])],1),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.info.content)}},[t._v("文章内容")]),n("article-comment")],1)],1)},a=[],i=n(7906),o=n(6198),s=n(7214),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},t._l(t.list,(function(e){return n("van-cell",{key:e.com_id},[[n("div",{staticClass:"cell-box"},[n("van-image",{attrs:{round:"",fit:"cover",src:e.aut_photo}}),n("div",{staticClass:"info-box"},[n("div",{staticStyle:{color:"#466bb5"}},[t._v(t._s(e.aut_name))]),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),n("div",[n("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(e.pubdate)))]),n("van-button",{attrs:{size:"mini",plain:""},on:{click:function(n){return t.showReply(e)}}},[t._v("回复("+t._s(e.reply_count)+")")])],1)]),n("van-icon",{attrs:{name:"like-o"}})],1)]],2)})),1),n("div",{staticStyle:{position:"fixed",left:"0",bottom:"0",width:"100%"}},[n("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入评论内容"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},scopedSlots:t._u([{key:"button",fn:function(){return[n("van-button",{attrs:{size:"small",type:"info"},on:{click:t.send}},[t._v("发布")])]},proxy:!0}]),model:{value:t.cmt,callback:function(e){t.cmt=e},expression:"cmt"}})],1),n("van-action-sheet",{attrs:{title:"发表回复"},model:{value:t.replyShow,callback:function(e){t.replyShow=e},expression:"replyShow"}},[t.replyShow?n("reply",{attrs:{currentCmt:t.currentItem}}):t._e()],1)],1)},u=[],l=n(8932),d=(n(3210),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-cell",[[n("div",{staticClass:"cell-box"},[n("van-image",{attrs:{round:"",fit:"cover",src:t.currentCmt.aut_photo}}),n("div",{staticClass:"info-box"},[n("div",{staticStyle:{color:"#466bb5"}},[t._v(t._s(t.currentCmt.aut_name))]),n("div",{staticClass:"content"},[t._v(t._s(t.currentCmt.content))]),n("div",[n("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(t.currentCmt.pubdate)))])])])],1)]],2),n("van-divider",[t._v("回复列表")]),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},t._l(t.list,(function(e){return n("van-cell",{key:e.com_id},[[n("div",{staticClass:"cell-box"},[n("van-image",{attrs:{round:"",fit:"cover",src:e.aut_photo}}),n("div",{staticClass:"info-box"},[n("div",{staticStyle:{color:"#466bb5"}},[t._v(t._s(e.aut_name))]),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),n("div",[n("span",{staticClass:"time"},[t._v(t._s(t._f("relvTime")(e.pubdate)))])])])],1)]],2)})),1),n("div",{staticStyle:{position:"fixed",left:"0",bottom:"0",width:"100%"}},[n("van-field",{attrs:{center:"",clearable:"",placeholder:"请输入评论内容"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},scopedSlots:t._u([{key:"button",fn:function(){return[n("van-button",{attrs:{size:"small",type:"info"},on:{click:t.send}},[t._v("发布")])]},proxy:!0}]),model:{value:t.cmt,callback:function(e){t.cmt=e},expression:"cmt"}})],1)],1)}),f=[],v={props:{currentCmt:{type:Object,required:!0}},data:function(){return{isLoading:!1,finished:!1,list:[],cmt:"",offset:null}},methods:{onLoad:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var n,r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.TW)({type:"c",source:t.currentCmt.com_id,offset:t.offset});case 2:r=e.sent,(n=t.list).push.apply(n,(0,l.Z)(r.data.data.results)),t.offset=r.data.data.last_id,t.isLoading=!1,r.data.data.end_id===r.data.data.last_id&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},send:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.cmt.trim()){e.next=2;break}return e.abrupt("return",t.$toast("请输入点内容"));case 2:return e.next=4,(0,s.BV)({target:t.currentCmt.com_id,content:t.cmt,art_id:t.$route.query.id});case 4:n=e.sent,t.list.unshift(n.data.data.new_obj),t.cmt="",t.currentCmt.reply_count++;case 8:case"end":return e.stop()}}),e)})))()}}},p=v,m=n(1001),_=(0,m.Z)(p,d,f,!1,null,"dd0a56d2",null),y=_.exports,h={components:{reply:y},data:function(){return{isLoading:!1,finished:!1,list:[],cmt:"",offset:null,replyShow:!1,currentItem:{}}},methods:{showReply:function(t){this.currentItem=t,this.replyShow=!0},onLoad:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var n,r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.TW)({type:"a",source:t.$route.query.id,offset:t.offset});case 2:r=e.sent,(n=t.list).push.apply(n,(0,l.Z)(r.data.data.results)),t.offset=r.data.data.last_id,t.isLoading=!1,r.data.data.end_id===r.data.data.last_id&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},send:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.cmt.trim()){e.next=2;break}return e.abrupt("return",t.$toast("请输入点内容"));case 2:return e.next=4,(0,s.BV)({target:t.$route.query.id,content:t.cmt});case 4:n=e.sent,t.list.unshift(n.data.data.new_obj),t.cmt="";case 7:case"end":return e.stop()}}),e)})))()}}},b=h,k=(0,m.Z)(b,c,u,!1,null,"7c1e7903",null),x=k.exports,w={components:{ArticleComment:x},data:function(){return{info:{}}},created:function(){var t=this;return(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.qK)(t.$route.query.id);case 2:n=e.sent,t.info=n.data.data;case 4:case"end":return e.stop()}}),e)})))()},destroyed:function(){console.log("article被销毁")}},C=w,Z=(0,m.Z)(C,r,a,!1,null,"0adb35fc",null),g=Z.exports},1038:function(t,e,n){var r=n(2109),a=n(8457),i=n(7072),o=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:a})},3748:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return r}})},8932:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(3748);function a(t){if(Array.isArray(t))return(0,r.Z)(t)}n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=n(8936);n(1703);function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||i(t)||(0,o.Z)(t)||s()}},8936:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});n(7042),n(1539),n(8309),n(1038),n(8783),n(4916),n(7601);var r=n(3748);function a(t,e){if(t){if("string"===typeof t)return(0,r.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(t,e):void 0}}}}]);